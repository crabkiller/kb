{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "resources": [
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/Web%20Widget%20%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%20syncCacheProvider%20%E6%9C%BA%E5%88%B6%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90.md",
        "name": "Web Widget æ¶æ„è®¾è®¡ä¸ syncCacheProvider æœºåˆ¶æ·±åº¦è§£æ",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **Web Widget æ ¸å¿ƒå®šä½**ï¼šåŸºäº Web Components æ ‡å‡†çš„å¾®æ¨¡å—æ–¹æ¡ˆï¼Œè§£å†³ Monorepo é¡¹ç›®ä¸­è·¨å›¢é˜Ÿåä½œã€è·¨æ¡†æ¶æ··åˆè¿è¡Œï¼ˆå¦‚ React ä¸­è¿è¡Œ Vueï¼‰åŠæ¸è¿›å¼è¿ç§»é—®é¢˜ã€‚\n- **å®ç°åŸç†**ï¼š\n  - **HTMLWebWidgetElement**ï¼šè‡ªå®šä¹‰å…ƒç´ ä½œä¸ºå®¹å™¨ï¼Œç®¡ç† Widget çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼ˆLOADING, LOADED, BOOTSTRAPPED, MOUNTEDï¼‰ã€‚\n  - **ç”Ÿå‘½å‘¨æœŸåè®®**ï¼šæ ‡å‡†åŒ– `bootstrap`ã€`mount`ã€`unmount` é’©å­ï¼Œå±è”½æ¡†æ¶å·®å¼‚ã€‚\n  - **é€‚é…å™¨æ¨¡å¼**ï¼šé€šè¿‡ `toReact` ç­‰ HOC åœ¨ React ç”Ÿå‘½å‘¨æœŸå†…ç®¡ç† Vue å®ä¾‹ï¼ŒåŒæ­¥ Props å¹¶æ¡¥æ¥äº‹ä»¶ã€‚\n- **syncCacheProvider æœºåˆ¶**ï¼š\n  - **SSR é˜¶æ®µ**ï¼šé˜»å¡æ‰§è¡Œ fetcherï¼Œå°†æ•°æ®å­˜å…¥ `lifecycleCache` å¹¶åºåˆ—åŒ–è‡³ HTML çš„ JSON çŠ¶æ€ä¸­ã€‚\n  - **CSR é˜¶æ®µ**ï¼šé¦–å±åŠ è½½ä» JSON æ¢å¤ç¼“å­˜ï¼Œ`syncCacheProvider` å‘½ä¸­ç¼“å­˜ååŒæ­¥è¿”å›æ•°æ®ï¼Œæ¶ˆé™¤ç™½å±é—ªçƒã€‚è‹¥æ— ç¼“å­˜åˆ™é€€åŒ–ä¸ºå¼‚æ­¥ Promiseã€‚\n- **æ€§èƒ½ä¼˜åŒ–**ï¼šæ”¯æŒ `loading=\"lazy\"` æŒ‰éœ€æ¿€æ´»ï¼ˆHydrationï¼‰ï¼Œä»…åœ¨è¿›å…¥è§†å£æ—¶åˆå§‹åŒ–è¿è¡Œæ—¶ã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/Layer%20Picker%20%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B8%8E%E4%BC%98%E5%8C%96.md",
        "name": "Layer Picker ç¢°æ’æ£€æµ‹å®ç°åŸç†ä¸ä¼˜åŒ–",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š### 1. Color Picking æŠ€æœ¯åŸç†\n- **æ ¸å¿ƒæ€æƒ³**ï¼šä¸ºæ¯ä¸ªå¯äº¤äº’å…ƒç´ åˆ†é…å”¯ä¸€é¢œè‰² IDï¼Œå°†æ‰€æœ‰å…ƒç´ ç»˜åˆ¶åˆ°ç¦»å± Canvasï¼ˆhitCanvasï¼‰ï¼Œç‚¹å‡»æ—¶è¯»å–åƒç´ é¢œè‰²åå‘æŸ¥æ‰¾å…ƒç´ \n- **ä¼˜åŠ¿**ï¼šç²¾ç¡®ã€ç»Ÿä¸€ã€é«˜æ•ˆï¼Œå¯å¤„ç†ä¸è§„åˆ™å½¢çŠ¶å’Œé€æ˜åŒºåŸŸ\n- **å…³é”®ç»„ä»¶**ï¼šLayerPicker ç±»ã€colorImage ç€è‰²å‡½æ•°ã€transformLayer å˜æ¢å‡½æ•°ã€getLayers å›¾å±‚æå–\n\n### 2. å›¾åƒç€è‰²ç®—æ³•ï¼ˆcolorImageï¼‰\n- é€šè¿‡ **åå¤ç»˜åˆ¶è‡ªèº«**ï¼ˆé»˜è®¤15æ¬¡ï¼‰æ¶ˆé™¤åŠé€æ˜åƒç´ ï¼Œä½¿ alpha è¶‹è¿‘äº 1\n- ä½¿ç”¨ `source-in` æ··åˆæ¨¡å¼å°†å›¾åƒç€è‰²ä¸ºæŒ‡å®šé¢œè‰²\n- æ·»åŠ  `shadowBlur` æ‰©å±•è¾¹ç¼˜ï¼Œæé«˜è¾¹ç¼˜æ£€æµ‹ç²¾åº¦\n\n### 3. åå¤ç»˜åˆ¶çš„æ€§èƒ½é—®é¢˜\n- æ¯ä¸ªå…ƒç´ éœ€è¦ 15 æ¬¡ `drawImage` è°ƒç”¨ï¼ŒN ä¸ªå›¾åƒéœ€è¦ 15N æ¬¡\n- æ—¶é—´å¤æ‚åº¦ï¼šO(repeatDrawCount Ã— width Ã— height Ã— N)\n\n### 4. ä¼˜åŒ–æ–¹æ¡ˆå¯¹æ¯”\n\n| æ–¹æ¡ˆ | åŸç† | æ€§èƒ½æå‡ | å¤æ‚åº¦ |\n|------|------|----------|--------|\n| **ImageData åƒç´ æ“ä½œ** | ç›´æ¥éå†åƒç´ ï¼Œalpha > 0 è®¾ä¸º 255 | â˜…â˜…â˜…â˜†â˜† | ä½ |\n| **lighter æ··åˆæ¨¡å¼** | alpha ç›´æ¥ç›¸åŠ ï¼Œ5æ¬¡å³å¯è¾¾åˆ°1.0 | â˜…â˜…â˜…â˜†â˜† | ä½ |\n| **WebGL Shader** | GPU å¹¶è¡Œå¤„ç†ï¼Œfragment shader ç€è‰² | â˜…â˜…â˜…â˜…â˜… | é«˜ |\n| **å¢é‡æ›´æ–°** | ç¼“å­˜å·²ç€è‰²ç»“æœï¼Œåªå¤„ç†å˜æ›´å›¾å±‚ | â˜…â˜…â˜…â˜…â˜† | ä¸­ |\n\n### 5. Canvas æ··åˆæ¨¡å¼çš„ Alpha è®¡ç®—\n\n| æ¨¡å¼ | Alpha å…¬å¼ | Î±=0.5 ç»“æœ | æ•ˆæœ |\n|------|------------|------------|------|\n| source-over | `Î± + Î± Ã— (1 - Î±)` | 0.75 | å¢åŠ  |\n| **lighter** | `Î± + Î±` (clamp to 1) | 1.0 | **å¢åŠ æœ€å¿«** |\n| screen | `Î± + Î± - Î± Ã— Î±` | 0.75 | å¢åŠ  |\n| multiply | `Î± Ã— Î±` | 0.25 | å‡å°‘ |\n\n- **lighter æ¨¡å¼æœ€é«˜æ•ˆ**ï¼š5æ¬¡å³å¯å°† Î±=0.1 æå‡åˆ° 1.0ï¼ˆsource-over éœ€è¦15+æ¬¡ï¼‰\n- **æ— æ³•ç›´æ¥å®ç° alpha äºŒå€¼åŒ–**ï¼šæ ‡å‡†æ··åˆæ¨¡å¼éƒ½æ˜¯è¿ç»­å‡½æ•°ï¼Œéœ€é…åˆ ImageData æˆ– Shader\n\n### 6. æ¨¡ç³ŠåŒ¹é…æœºåˆ¶\n\n**è§¦å‘åŸå› **ï¼ˆè¯»å–åƒç´ é¢œè‰²ä¸å­˜å‚¨é¢œè‰²ä¸åŒ¹é…ï¼‰ï¼š\n- åŠé€æ˜åƒç´ ä¸èƒŒæ™¯æ··åˆå¯¼è‡´é¢œè‰²åç§»\n- æŠ—é”¯é½¿äº§ç”Ÿè¾¹ç¼˜ä¸­é—´è‰²\n- zoom ç¼©æ”¾æ—¶æµè§ˆå™¨é¢œè‰²æ’å€¼\n- å¤šå›¾å±‚è¾¹ç¼˜é‡å æ··åˆ\n- `getImageData` é‡‡æ ·è¾¹ç•Œåƒç´ \n\n**ä¿ç•™å¿…è¦æ€§**ï¼š\n- å³ä½¿ colorImage è¾“å‡ºå®Œç¾çº¯è‰²ï¼Œåç»­ç»˜åˆ¶/é‡‡æ ·ç¯èŠ‚ä»å¯èƒ½å¼•å…¥åå·®\n- æ¨¡ç³ŠåŒ¹é…æ˜¯æ•´ä¸ªæµç¨‹ä¸­é¢œè‰²ç²¾åº¦æŸå¤±çš„**å…œåº•æœºåˆ¶**\n- é…åˆ `imageSmoothingEnabled = false` å¯å¤§å¹…å‡å°‘è§¦å‘é¢‘ç‡\n\n### 7. æ¨èä¼˜åŒ–è·¯å¾„\n1. **çŸ­æœŸ**ï¼šå°†åå¤ç»˜åˆ¶æ›¿æ¢ä¸º lighter æ¨¡å¼ï¼ˆ5æ¬¡ï¼‰æˆ– ImageData åƒç´ æ“ä½œ\n2. **ä¸­æœŸ**ï¼šå®ç°å¢é‡æ›´æ–°æœºåˆ¶ï¼Œé¿å…å…¨é‡é‡ç»˜\n3. **é•¿æœŸ**ï¼šè€ƒè™‘ WebGL ç»Ÿä¸€æ–¹æ¡ˆ",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/Kubernetes%20(K8s)%20%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E4%B8%8E%E4%BB%B7%E5%80%BC%EF%BC%88%E5%85%A8%E9%87%8F%E6%80%9D%E8%80%83%E7%89%88%EF%BC%89.md",
        "name": "Kubernetes (K8s) æ ¸å¿ƒæ¦‚å¿µä¸ä»·å€¼ï¼ˆå…¨é‡æ€è€ƒç‰ˆï¼‰",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **Kubernetes (K8s) å®šä¹‰**ï¼šå¼€æºå®¹å™¨ç¼–æ’å¹³å°ï¼Œç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ã€‚\n- **æ¶æ„ç»„æˆ**ï¼š\n  - **Control Plane (æ§åˆ¶å¹³é¢)**ï¼šå†³ç­–ä¸­å¿ƒã€‚\n  - **Nodes (èŠ‚ç‚¹)**ï¼šè¿è¡Œç¯å¢ƒï¼ŒåŒ…å« Kubelet å’Œå®¹å™¨è¿è¡Œæ—¶ã€‚\n- **æ ¸å¿ƒå¯¹è±¡**ï¼š\n  - **Pod**ï¼šæœ€å°è°ƒåº¦å•ä½ï¼Œå…±äº«ç½‘ç»œå’Œå­˜å‚¨ã€‚\n  - **Controllers**ï¼šDeployment (æ— çŠ¶æ€), StatefulSet (æœ‰çŠ¶æ€), DaemonSet (å…¨èŠ‚ç‚¹å‰¯æœ¬)ã€‚\n  - **Service & Ingress**ï¼šæœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ä¸å¤–éƒ¨è·¯ç”±ç®¡ç†ã€‚\n- **æ ¸å¿ƒä»·å€¼**ï¼šè§£å†³å¤§è§„æ¨¡å®¹å™¨ç®¡ç†ä¸­çš„è‡ªåŠ¨åŒ–è¿ç»´ã€æœåŠ¡å‘ç°ã€é«˜å¯ç”¨è‡ªæ„ˆã€èµ„æºåˆ©ç”¨ç‡ä¼˜åŒ–ã€ç‰ˆæœ¬å‘å¸ƒé£é™©æ§åˆ¶åŠç¯å¢ƒä¸€è‡´æ€§é—®é¢˜ã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/CSS%20%E5%B8%83%E5%B1%80%E4%B8%8E%20Grid%20%E7%80%91%E5%B8%83%E6%B5%81%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90.md",
        "name": "CSS å¸ƒå±€ä¸ Grid ç€‘å¸ƒæµæ·±åº¦è§£æ",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **Flex å¸ƒå±€æ”¶ç¼©è§„åˆ™ (flex-shrink)**ï¼š\n  - è®¡ç®—å…¬å¼ï¼š`åŠ æƒæ”¶ç¼©é‡ = æº¢å‡ºç©ºé—´ * (flex-basis * flex-shrink) / æ€»åŠ æƒå€¼`ã€‚\n  - é»˜è®¤ `flex-shrink: 1`ã€‚è‹¥æ‰€æœ‰å­å…ƒç´ æ”¶ç¼©æ¯”ä¾‹ä¹‹å’Œå°äº 1ï¼Œæº¢å‡ºç©ºé—´ä¸ä¼šè¢«å®Œå…¨å¸æ”¶ã€‚\n  - æ˜“é”™ç‚¹ï¼š`min-width` é»˜è®¤ä¸º `auto`ï¼Œé•¿æ–‡æœ¬æº¢å‡ºå¸¸å¯¼è‡´æ”¶ç¼©å¤±æ•ˆï¼Œéœ€æ‰‹åŠ¨è®¾ä¸º `0`ã€‚\n- **Grid å¸ƒå±€æ ¸å¿ƒç‰¹æ€§**ï¼š\n  - **äºŒç»´å¸ƒå±€**ï¼šåŒæ—¶å¤„ç†è¡Œå’Œåˆ—ã€‚\n  - **è‡ªé€‚åº”é»‘ç§‘æŠ€**ï¼š`repeat(auto-fill, minmax(200px, 1fr))` å®ç°æ— éœ€åª’ä½“æŸ¥è¯¢çš„å“åº”å¼ç½‘æ ¼ã€‚\n  - **auto-fill vs auto-fit**ï¼š`auto-fill` å³ä½¿æ ¼å­ä¸ºç©ºä¹Ÿä¿ç•™ï¼ˆç•™ç™½ï¼‰ï¼Œ`auto-fit` ä¼šæŠ˜å ç©ºæ ¼å­ï¼ˆæ‹‰ä¼¸ï¼‰ã€‚\n- **Grid ç€‘å¸ƒæµ (Masonry)**ï¼š\n  - `grid-template-rows: masonry` æ˜¯ Level 3 è§„èŒƒï¼Œå…è®¸ç½‘æ ¼è¡Œä¸å†å¼ºåˆ¶å¯¹é½ï¼Œè‡ªåŠ¨å¡«å……ç©ºéš™ã€‚\n  - ç›®å‰ä»… Firefox å®éªŒæ€§æ”¯æŒï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸éœ€é…åˆ JS è®¡ç®— `grid-row-end: span N`ã€‚\n- **é¢è¯•æ˜“æ··æ·†ç‚¹**ï¼š\n  - `flex: 1` ç­‰ä»·äº `flex-grow: 1; flex-shrink: 1; flex-basis: 0%;`ã€‚\n  - `flex-basis` ä¼˜å…ˆçº§é«˜äº `width`ï¼Œä½†å— `min/max-width` é™åˆ¶ã€‚\n  - `margin: auto` åœ¨ Flex/Grid å®¹å™¨ä¸­å¯å®ç°å‚ç›´æ°´å¹³åŒå‘å±…ä¸­ã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/%E7%A8%BF%E5%AE%9A%E7%BC%96%E8%BE%91%E5%99%A8%E6%89%A9%E5%B1%95(Extension)%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E9%93%BE%E8%B7%AF%E5%88%86%E6%9E%90.md",
        "name": "ç¨¿å®šç¼–è¾‘å™¨æ‰©å±•(Extension)ç³»ç»Ÿæ¶æ„è®¾è®¡ä¸é“¾è·¯åˆ†æ",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š### 1. æ‰©å±•ç³»ç»Ÿä¸‰å±‚æ¶æ„\n\n| åŒ…/ç›®å½• | å®šä½ | æ ¸å¿ƒå†…å®¹ |\n|---------|------|----------|\n| `packages/design/extension` | **è¿è¡Œæ—¶æ ¸å¿ƒ** | `ExtensionManager`ã€`Extension`ã€`ExtensionApi`ã€å…¥å£æ³¨å†Œ hooks |\n| `packages/design/extension-store` | **çŠ¶æ€ç®¡ç†** | Pinia Storeï¼Œç®¡ç†èœå•/å…¥å£çš„æ³¨å†Œã€å¯ç”¨/ç¦ç”¨ |\n| `extensions/*` | **æ‰©å±•å®ç°** | æ¯ä¸ªå­ç›®å½•æ˜¯ä¸€ä¸ªç‹¬ç«‹æ‰©å±•ï¼ŒåŒ…å« `manifest.json` + `src/index.ts` |\n\n### 2. ä¸‰ä¸ªæ ¸å¿ƒç±»èŒè´£\n\n- **ExtensionManager**ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰æ‰©å±•çš„åŠ è½½ã€æ³¨å†Œã€è¿è¡Œã€å¸è½½ï¼Œç»´æŠ¤ `Map<id, Extension>` æ˜ å°„è¡¨\n- **Extension**ï¼šå•ä¸ªæ‰©å±•å®ä¾‹å°è£…ï¼Œç®¡ç†ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼ˆinit/register/bootstrap/run/unmountï¼‰\n- **ExtensionApi**ï¼šæ‰©å±•å¯è°ƒç”¨çš„ API ä¸Šä¸‹æ–‡ï¼Œæ¡¥æ¥ç¼–è¾‘å™¨æ ¸å¿ƒèƒ½åŠ›ï¼Œæä¾› 100+ API æ–¹æ³•\n\n### 3. æ‰©å±•ç”Ÿå‘½å‘¨æœŸ\n\n```\nload â†’ register â†’ bootstrapï¼ˆæ‡’åŠ è½½ï¼‰â†’ run â†’ unmount\n```\n\n- **load**ï¼šè§£æ ExtensionConfigï¼Œåˆ›å»º Extension å®ä¾‹\n- **register**ï¼šè°ƒç”¨ beforeRegister/afterRegister é’©å­ï¼Œæ³¨å†Œ UI å…¥å£ï¼ˆæ­¤æ—¶æ‰©å±•ä»£ç å°šæœªæ‰§è¡Œï¼‰\n- **bootstrap**ï¼šç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶æ‰åŠ¨æ€åŠ è½½ä»£ç å¹¶æ‰§è¡Œ activate()\n- **run**ï¼šæ‰§è¡Œå…·ä½“å‘½ä»¤\n- **unmount**ï¼šæ¸…ç†æ‰€æœ‰æ³¨å†Œé¡¹\n\n### 4. Manifest å£°æ˜è§„èŒƒ\n\n```typescript\ninterface Manifest<T> {\n  id: string;\n  name: string;\n  main: (options?: T) => Promise<{ activate: (ctx: ExtensionAPI, options?: T) => void }>;\n  ui?: Record<string, () => Promise<{ ResourceStationView?; SettingContainerView? }>> | string;\n  entries?: Partial<Record<EntryTypes, Entry[]>>;\n  commands?: Record<string, { title: string; icon?: string; when?: string; }>;\n  beforeRegister?: (ctx?: ExtensionAPI, options?: T) => void;\n  afterRegister?: (api: ExtensionAPI, options?: T) => void;\n}\n```\n\n### 5. å…¥å£ç±»å‹ï¼ˆEntryTypesï¼‰\n\n- `ResourceActivityBar`ï¼šå·¦ä¾§èµ„æºæ \n- `SettingContainer`ï¼šå³ä¾§è®¾ç½®é¢æ¿\n- `EditorToolbar`ï¼šç¼–è¾‘å™¨ toolbar\n- `EditorContextmenu`ï¼šå³é”®èœå•\n- `FileMenu`ï¼šå·¦ä¸Šè§’æ–‡ä»¶èœå•\n- `ExportAction`ï¼šä¸‹è½½æŒ‰é’®\n- `EditorAddTools`ï¼šå·¦ä¾§æ·»åŠ å·¥å…·\n- `FilterResourceSlot` / `ComponentResourceSlot`ï¼šæ’æ§½ç»„ä»¶\n\n### 6. JS â†” UI é€šä¿¡æœºåˆ¶\n\næ‰©å±•åˆ†ç¦»ä¸º JS å±‚ï¼ˆé€»è¾‘ï¼‰å’Œ UI å±‚ï¼ˆVue ç»„ä»¶ï¼‰ï¼Œé€šè¿‡äº‹ä»¶ç³»ç»Ÿé€šä¿¡ï¼š\n\n```\nJS å±‚                           UI å±‚\nctx.postMessage() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º props.on()\nctx.on()          â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ props.postMessage()\n```\n\nUI ç»„ä»¶é€šè¿‡ props æ¥æ”¶é€šä¿¡æ–¹æ³•ï¼ˆ`postMessage`ã€`postMessageToJSAsync`ã€`on`ã€`once`ï¼‰ã€‚\n\n### 7. text-rewrite æ‰©å±•å®Œæ•´é“¾è·¯\n\n1. **æ³¨å†Œé˜¶æ®µ**ï¼šafterRegister ä¸­æ³¨å†Œ 4 ç±»å…¥å£ï¼ˆå±æ€§é¢æ¿ã€å³é”®èœå•ã€toolbarã€ç¼–è¾‘å™¨æ’ä»¶ï¼‰\n2. **ç”¨æˆ·è§¦å‘**ï¼šç‚¹å‡»ä»»ä¸€å…¥å£ â†’ openTextRewrite() â†’ æ£€æŸ¥ç™»å½• â†’ showElementEditor()\n3. **æ’ä»¶æ¿€æ´»**ï¼šç›‘å¬ element.$editing && $editingType === 'aiTextRewrite'\n4. **UI æŒ‚è½½**ï¼šonMounted â†’ éšè— toolbar â†’ ç¦ç”¨å±æ€§é¢æ¿ â†’ è°ƒç”¨ OCR API\n5. **OCR è¯†åˆ«**ï¼šè°ƒç”¨ `new-image-ocr` æ¥å£ï¼Œè§£ææ–‡å­—åæ ‡å’Œå†…å®¹\n6. **ç”¨æˆ·ç¼–è¾‘**ï¼šæ˜¾ç¤º Popup å¼¹çª—ï¼Œç”¨æˆ·ä¿®æ”¹æ–‡æœ¬\n7. **AI ç”Ÿæˆ**ï¼šç‚¹å‡»åº”ç”¨ â†’ è°ƒç”¨ `TextEdit` API â†’ æ’å…¥æ–°å…ƒç´  â†’ åº”ç”¨ç»“æœ\n\n### 8. è®¾è®¡äº®ç‚¹\n\n| ç‰¹æ€§ | è¯´æ˜ |\n|------|------|\n| æ‡’åŠ è½½ | æ‰©å±•ä»£ç åœ¨ç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶æ‰åŠ è½½æ‰§è¡Œ |\n| å£°æ˜å¼å…¥å£ | é€šè¿‡ manifest.entries å£°æ˜ UI æŒ‚è½½ç‚¹ |\n| API æ²™ç®± | ExtensionApi ä½œä¸ºä¸­é—´å±‚éš”ç¦»æ‰©å±•ä¸ç¼–è¾‘å™¨å†…æ ¸ |\n| æ’ä»¶æ³¨å†Œè¿½è¸ª | registeredItems ç»Ÿä¸€ç®¡ç†ï¼Œå¸è½½æ—¶è‡ªåŠ¨æ¸…ç† |\n| æƒé™é›†æˆ | å…¥å£æ³¨å†Œæ—¶è‡ªåŠ¨æ ¡éªŒ permissionCode |",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/AI%20%E9%A2%86%E5%9F%9F%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E4%B8%8E%20RAG%20%E6%9E%B6%E6%9E%84%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90.md",
        "name": "AI é¢†åŸŸæ ¸å¿ƒæ¦‚å¿µä¸ RAG æ¶æ„æ·±åº¦è§£æ",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **LLM (å¤§è¯­è¨€æ¨¡å‹)**ï¼šAI çš„â€œå¤§è„‘â€ï¼Œè´Ÿè´£è¯­ä¹‰ç†è§£ä¸æ–‡æœ¬ç”Ÿæˆã€‚æ¼”è¿›ä» RNN åˆ° Transformerï¼Œå†åˆ° GPT ç³»åˆ—ï¼Œè§£å†³äº†æœºå™¨ç†è§£è‡ªç„¶è¯­è¨€çš„é—®é¢˜ã€‚\n- **Agent (æ™ºèƒ½ä½“)**ï¼šä»¥ LLM ä¸ºæ ¸å¿ƒï¼Œå…·å¤‡è§„åˆ’ã€è®°å¿†å’Œå·¥å…·ä½¿ç”¨èƒ½åŠ›çš„ç³»ç»Ÿã€‚å®ƒè®© AI ä»â€œå¯¹è¯è€…â€è¿›åŒ–ä¸ºâ€œæ‰§è¡Œè€…â€ï¼Œèƒ½å¤Ÿè‡ªä¸»å®Œæˆå¤æ‚ä»»åŠ¡ã€‚\n- **Skill (æŠ€èƒ½)**ï¼šAgent çš„ä¸“ä¸šæ’ä»¶æˆ–æŒ‡ä»¤é›†ã€‚åœ¨ Cursor ä¸­è¡¨ç°ä¸º `.mdc` è§„åˆ™æ–‡ä»¶ï¼Œæ•™å¯¼ AI å¦‚ä½•åˆ©ç”¨å·¥å…·ï¼ˆå¦‚ MCPï¼‰å®Œæˆç‰¹å®šä¸šåŠ¡æµç¨‹ã€‚\n- **MCP (æ¨¡å‹ä¸Šä¸‹æ–‡åè®®)**ï¼šç”± Anthropic æå‡ºçš„å¼€æ”¾æ ‡å‡†ï¼Œè§£å†³äº† AI ä¸å¤–éƒ¨æ•°æ®æºï¼ˆæ–‡ä»¶ã€æ•°æ®åº“ç­‰ï¼‰é›†æˆæˆæœ¬é«˜ã€æ•°æ®å­¤å²›çš„é—®é¢˜ï¼Œæ˜¯ AI çš„â€œç¥ç»é€šè·¯â€ã€‚\n- **å¹»è§‰ (Hallucination)**ï¼šæŒ‡ AI ç”Ÿæˆçœ‹ä¼¼åˆç†ä½†äº‹å®é”™è¯¯çš„å†…å®¹ã€‚åŸå› åŒ…æ‹¬è®­ç»ƒæ•°æ®è¿‡æ—¶ã€æ¨¡å‹çš„æ¦‚ç‡é¢„æµ‹æœ¬è´¨ã€ç¼ºä¹å®æ—¶æ„ŸçŸ¥ç­‰ã€‚\n- **RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ)**ï¼šé€šè¿‡â€œæ£€ç´¢ï¼ˆæ‰¾èµ„æ–™ï¼‰+ ç”Ÿæˆï¼ˆæ€»ç»“å›ç­”ï¼‰â€çš„æ¨¡å¼ï¼Œç»™ AI æä¾›â€œå¼€å·è€ƒè¯•â€çš„å‚è€ƒä¹¦ï¼Œæ˜¯é™ä½å¹»è§‰ã€è§£å†³æ—¶æ•ˆæ€§é—®é¢˜çš„æ ¸å¿ƒæ‰‹æ®µã€‚\n- **RAG ç¼–æ’å™¨ (Orchestrator)**ï¼šè´Ÿè´£ RAG æµç¨‹çš„å·¥ç¨‹åŒ–ä»£ç é€»è¾‘ï¼ŒåŒ…å«é—®é¢˜æ”¹å†™ã€å‘é‡æ£€ç´¢ã€é‡æ’åºï¼ˆRerankï¼‰å’Œæç¤ºè¯ç»„è£…ã€‚å®ƒä¸æ˜¯ç®€å•çš„ SQLï¼Œè€Œæ˜¯ç¡®å®šæ€§çš„ç®—æ³•æµç¨‹ã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/HTTP%20%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97.md",
        "name": "HTTP ç¼“å­˜æœºåˆ¶å®Œå…¨æŒ‡å—",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š### 1. HTTP ç¼“å­˜è¯·æ±‚å¤´å’Œå“åº”å¤´\n\n**å“åº”å¤´ï¼ˆResponse Headersï¼‰**ï¼š\n- **Cache-Control**ï¼šæœ€é‡è¦çš„ç¼“å­˜æ§åˆ¶å­—æ®µ\n  - `max-age=<ç§’>`ï¼šç¼“å­˜æœ‰æ•ˆæœŸï¼ˆç›¸å¯¹æ—¶é—´ï¼‰\n  - `s-maxage=<ç§’>`ï¼šå…±äº«ç¼“å­˜ï¼ˆCDNï¼‰çš„æœ‰æ•ˆæœŸï¼Œä¼˜å…ˆçº§é«˜äº max-age\n  - `no-cache`ï¼šå¯ä»¥ç¼“å­˜ï¼Œä½†æ¯æ¬¡ä½¿ç”¨å‰å¿…é¡»éªŒè¯\n  - `no-store`ï¼šç¦æ­¢ç¼“å­˜\n  - `public`ï¼šå¯è¢«ä»»ä½•ç¼“å­˜å­˜å‚¨ï¼ˆåŒ…æ‹¬ CDNï¼‰\n  - `private`ï¼šåªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜\n  - `must-revalidate`ï¼šè¿‡æœŸåå¿…é¡»å‘æœåŠ¡å™¨éªŒè¯\n  - `immutable`ï¼šèµ„æºæ°¸è¿œä¸ä¼šæ”¹å˜\n- **ETag**ï¼šèµ„æºçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ”¯æŒå¼ºéªŒè¯å’Œå¼±éªŒè¯ï¼ˆW/å‰ç¼€ï¼‰\n- **Last-Modified**ï¼šèµ„æºæœ€åä¿®æ”¹æ—¶é—´\n- **Expires**ï¼šç¼“å­˜è¿‡æœŸçš„ç»å¯¹æ—¶é—´ï¼ˆHTTP/1.0ï¼Œå·²è¿‡æ—¶ï¼‰\n- **Age**ï¼šèµ„æºåœ¨ä»£ç†ç¼“å­˜ä¸­å­˜åœ¨çš„æ—¶é—´\n- **Vary**ï¼šæŒ‡å®šå“ªäº›è¯·æ±‚å¤´ä¼šå½±å“ç¼“å­˜ç‰ˆæœ¬\n\n**è¯·æ±‚å¤´ï¼ˆRequest Headersï¼‰**ï¼š\n- **If-None-Match**ï¼šé…åˆ ETag ä½¿ç”¨ï¼Œå‘é€ä¹‹å‰ä¿å­˜çš„ ETag å€¼\n- **If-Modified-Since**ï¼šé…åˆ Last-Modified ä½¿ç”¨\n- **Cache-Control**ï¼šå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ no-cacheã€no-storeã€max-age=0 ç­‰æŒ‡ä»¤\n\n**ç¼“å­˜å·¥ä½œæµç¨‹**ï¼š\n1. å¼ºç¼“å­˜ï¼šæ£€æŸ¥ Cache-Control/Expires æ˜¯å¦è¿‡æœŸï¼Œæœªè¿‡æœŸç›´æ¥ä½¿ç”¨ç¼“å­˜\n2. åå•†ç¼“å­˜ï¼šç¼“å­˜è¿‡æœŸåï¼Œæºå¸¦ If-None-Match/If-Modified-Since å‘æœåŠ¡å™¨éªŒè¯ï¼ŒæœåŠ¡å™¨è¿”å› 304ï¼ˆæœªå˜ï¼‰æˆ– 200ï¼ˆå·²å˜ï¼‰\n\n**ä¼˜å…ˆçº§å…³ç³»**ï¼š\n- Cache-Control > Expires\n- ETag > Last-Modified\n\n### 2. ETag çš„å¼ºéªŒè¯ vs å¼±éªŒè¯\n\n**å¼º ETag**ï¼ˆ`ETag: \"abc123\"`ï¼‰ï¼š\n- è¡¨ç¤ºèµ„æºå­—èŠ‚çº§å®Œå…¨ç›¸åŒ\n- ä»»ä½•å­—èŠ‚å˜åŒ–éƒ½ä¼šå¯¼è‡´ ETag æ”¹å˜\n- å¯ç”¨äºèŒƒå›´è¯·æ±‚ï¼ˆRangeï¼‰\n\n**å¼± ETag**ï¼ˆ`ETag: W/\"abc123\"`ï¼‰ï¼š\n- è¡¨ç¤ºèµ„æºè¯­ä¹‰ç­‰ä»·ï¼Œä½†å­—èŠ‚å¯èƒ½ä¸åŒ\n- å¿½ç•¥æ— å…³ç´§è¦çš„å·®å¼‚ï¼ˆå¦‚æ—¶é—´æˆ³ã€ç©ºç™½å­—ç¬¦ï¼‰\n- **ä¸èƒ½ç”¨äºèŒƒå›´è¯·æ±‚**\n\n**å¼±éªŒè¯çš„ä½¿ç”¨åœºæ™¯**ï¼š\n- åŠ¨æ€ç”Ÿæˆçš„é¡µé¢ï¼ŒåŒ…å«æ—¶é—´æˆ³\n- å‹ç¼©å¤„ç†çš„èµ„æºï¼ˆåŒä¸€å†…å®¹ä¸åŒç¼–ç ï¼‰\n- è‡ªåŠ¨æ ¼å¼åŒ–çš„ JSON\n- åŒ…å«å¹¿å‘Šæˆ–åˆ†æä»£ç çš„é¡µé¢\n\n**é€‰æ‹©å»ºè®®**ï¼š\n- é™æ€æ–‡ä»¶ã€éœ€è¦æ–­ç‚¹ç»­ä¼  â†’ å¼º ETag\n- åŠ¨æ€ HTMLã€å¯èƒ½è¢«å‹ç¼©çš„èµ„æº â†’ å¼± ETag\n- ä¸ç¡®å®šæ—¶ â†’ å¼º ETagï¼ˆæ›´å®‰å…¨ï¼‰\n\n### 3. no-cache vs max-age=0\n\n**no-cache**ï¼š\n- å¯ä»¥å­˜å‚¨ç¼“å­˜\n- ç›´æ¥è·³è¿‡\"æ£€æŸ¥æ˜¯å¦è¿‡æœŸ\"ï¼Œå¼ºåˆ¶éªŒè¯\n- è¯­ä¹‰ï¼šæ¯æ¬¡éƒ½è¦é—®æœåŠ¡å™¨\n\n**max-age=0**ï¼š\n- å¯ä»¥å­˜å‚¨ç¼“å­˜\n- ç¼“å­˜ç«‹å³è¿‡æœŸ\n- èµ°æ ‡å‡†çš„\"æ£€æŸ¥è¿‡æœŸâ†’éªŒè¯\"æµç¨‹\n\n**å®é™…æ•ˆæœ**ï¼šå‡ ä¹ç›¸åŒï¼Œéƒ½ä¼šå¯¼è‡´é‡æ–°éªŒè¯ï¼Œä½† `no-cache` è¯­ä¹‰æ›´æ¸…æ™°ï¼Œæ›´æ¨èä½¿ç”¨ã€‚\n\n**ä¸ no-store çš„åŒºåˆ«**ï¼š\n- `no-cache` / `max-age=0`ï¼šå¯ä»¥ç¼“å­˜ï¼Œä½†æ¯æ¬¡éªŒè¯ï¼ˆå¯èƒ½è¿”å› 304ï¼‰\n- `no-store`ï¼šå®Œå…¨ä¸ç¼“å­˜ï¼Œæ¯æ¬¡é‡æ–°ä¸‹è½½ï¼ˆæ°¸è¿œè¿”å› 200ï¼‰\n\n### 4. s-maxage vs max-age\n\n**ä½œç”¨èŒƒå›´å·®å¼‚**ï¼š\n- **max-age**ï¼šå¯¹æµè§ˆå™¨å’Œ CDN éƒ½ç”Ÿæ•ˆ\n- **s-maxage**ï¼šåªå¯¹ CDN/ä»£ç†ç”Ÿæ•ˆï¼Œæµè§ˆå™¨å¿½ç•¥\n\n**ä¼˜å…ˆçº§**ï¼šå½“ä¸¤è€…åŒæ—¶å­˜åœ¨æ—¶ï¼ŒCDN ä¼˜å…ˆä½¿ç”¨ s-maxageï¼Œæµè§ˆå™¨åªçœ‹ max-age\n\n**å…¸å‹åœºæ™¯**ï¼š\n```http\nCache-Control: max-age=3600, s-maxage=86400",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/%E9%98%BF%E9%87%8C%E4%BA%91%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97%E9%99%90%E5%88%B6%E4%B8%8E%E6%8E%A5%E5%85%A5%E8%A6%81%E7%82%B9.md",
        "name": "é˜¿é‡Œäº‘è¾¹ç¼˜è®¡ç®—é™åˆ¶ä¸æ¥å…¥è¦ç‚¹",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **é˜¿é‡Œäº‘è¾¹ç¼˜è®¡ç®—å¸¸è§ä¸‰ç§å½¢æ€**ï¼š\n  - **ESAï¼ˆEdge Security Accelerationï¼‰**ï¼šåâ€œè¾¹ç¼˜å¹³å°/è¾¹ç¼˜å‡½æ•°/å…¨ç«™åŠ é€Ÿ + å®‰å…¨â€ï¼Œé€‚åˆè¯·æ±‚æ”¹å†™ã€é‰´æƒã€ç°åº¦ã€è¾¹ç¼˜ç¼“å­˜ã€è½»é‡é€»è¾‘ä¸æ‰˜ç®¡å¼ SSRï¼ˆFunctions & Pagesï¼‰ã€‚\n  - **ENSï¼ˆEdge Node Serviceï¼‰**ï¼šåâ€œè¾¹ç¼˜ IaaS ç®—åŠ›â€ï¼Œé€‚åˆåœ¨è¾¹ç¼˜èŠ‚ç‚¹ä¸Šè¿è¡Œå®Œæ•´æœåŠ¡è¿›ç¨‹ï¼ˆå¦‚ Node/Java/Go SSRï¼‰ã€å®¹å™¨ã€ç½‘å…³ã€æ¨ç†ç­‰ã€‚\n  - **ACK@Edge**ï¼šåâ€œè¾¹ç¼˜ Kubernetesâ€ï¼Œé€‚åˆå·²æœ‰ K8s ä½“ç³»ï¼Œåšäº‘è¾¹ååŒä¸è¾¹ç¼˜èŠ‚ç‚¹çº³ç®¡ç¼–æ’ã€‚\n\n- **ESA ä¾§ï¼ˆè¾¹ç¼˜å‡½æ•°/å¹³å°ï¼‰å…¸å‹é™åˆ¶ï¼ˆä¼šç›´æ¥å½±å“ SSR/ç½‘å…³ç±»ä¸šåŠ¡ï¼‰**ï¼š\n  - **è¯·æ±‚/å“åº”å¤§å°é™åˆ¶ï¼ˆç½‘å…³çº§ï¼‰**ï¼šä¸åŒåè®®å¯¹å•ä¸ªè¯·æ±‚å¤´æˆ– URLã€è¯·æ±‚å¤´+URL æ€»å¤§å°ã€æºç«™å“åº”å¤´æ€»å¤§å°å­˜åœ¨ä¸Šé™ï¼Œè¶…é™ä¼šè¿”å› 4xx/5xxã€‚\n  - **Fetch å­è¯·æ±‚é™åˆ¶**ï¼šå•æ¬¡å¤„ç†å¯å‘èµ·å­è¯·æ±‚æ•°é‡å­˜åœ¨é»˜è®¤é…é¢ï¼›è¯·æ±‚ URL é•¿åº¦ã€é‡å®šå‘æ¬¡æ•°ã€ç«¯å£ï¼ˆ80/443ï¼‰ç­‰æœ‰çº¦æŸã€‚\n  - **è¿è¡Œæ—¶æ¨¡å‹é™åˆ¶**ï¼šå Web æ ‡å‡† API / V8 Isolateï¼Œé€šå¸¸ä¸ç­‰ä»·äºå®Œæ•´ Node.jsï¼ˆæ–‡ä»¶ç³»ç»Ÿã€åŸç”Ÿæ‰©å±•ã€ä»»æ„ socket ç­‰èƒ½åŠ›å¯èƒ½ä¸å¯ç”¨æˆ–å—é™ï¼‰ï¼Œæ›´é€‚åˆâ€œHTTP fetch ä¸²è”åç«¯â€çš„è½»é€»è¾‘ã€‚\n\n- **ENS ä¾§ï¼ˆè¾¹ç¼˜ç®—åŠ›ï¼‰å…¸å‹é™åˆ¶**ï¼š\n  - **é…é¢ä¸è§„æ ¼é™åˆ¶**ï¼šå®ä¾‹æ•°é‡ã€ç½‘å¡æ•°é‡ã€è‡ªå®šä¹‰é•œåƒæ•°é‡ç­‰æœ‰é»˜è®¤ä¸Šé™ï¼›å­˜å‚¨ï¼ˆç³»ç»Ÿç›˜/æ•°æ®ç›˜æ•°é‡ä¸å®¹é‡ï¼‰æœ‰ä¸Šé™ã€‚\n  - **ç½‘ç»œé…é¢é™åˆ¶**ï¼šå¸¦å®½å³°å€¼ã€EIP æ•°é‡ã€å• EIP å¸¦å®½ç­‰å­˜åœ¨é»˜è®¤ä¸Šé™ï¼ˆé€šå¸¸å¯ç”³è¯·æå‡ï¼‰ã€‚\n\n- **ACK@Edge ä¾§å…¸å‹é™åˆ¶**ï¼š\n  - **ç½‘ç»œä¸è®¿é—®æ§åˆ¶è¦æ±‚**ï¼šé€šå¸¸è¦æ±‚ VPCï¼›è¾¹ç¼˜èŠ‚ç‚¹çº³ç®¡ã€API Server è®¿é—®æ§åˆ¶ç™½åå•ã€äº‘è¾¹é€šä¿¡ç»„ä»¶ç­‰éœ€è¦æŒ‰æ–‡æ¡£æ”¾è¡ŒåŸŸå/IP/ç½‘æ®µä¸é…ç½®ç­–ç•¥ã€‚\n  - **é…é¢/è´¦æˆ·è¦æ±‚**ï¼šåˆ›å»ºé›†ç¾¤ã€è´Ÿè½½å‡è¡¡ã€EIPã€å®‰å…¨ç»„ç­‰å­˜åœ¨é…é¢ä¸Šé™ä¸å‰ç½®æ¡ä»¶ã€‚\n\n- **æ¥å…¥æ€è·¯ï¼ˆæŒ‰ç›®æ ‡é€‰æ‹©ï¼‰**ï¼š\n  - **è¦åœ¨è¾¹ç¼˜è·‘â€œå®Œæ•´ SSR æœåŠ¡è¿›ç¨‹â€**ï¼šä¼˜å…ˆ ENSï¼ˆæˆ– ACK@Edgeï¼‰ï¼Œå¿…è¦æ—¶å åŠ  ESA åšå°±è¿‘æ¥å…¥ + å®‰å…¨åŠ é€Ÿï¼ˆESA å›æºåˆ° ENSï¼‰ã€‚\n  - **è¦â€œè½»é‡é€»è¾‘ + å›æºæ‹¼è£…/é‰´æƒ/é‡å®šå‘/ç¼“å­˜â€**ï¼šä¼˜å…ˆ ESA EdgeRoutine / Functions & Pagesã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/AI%20%E5%AF%B9%E8%AF%9D%E6%9E%B6%E6%9E%84%E4%B8%8E%20SSE%20EventSource%20%E5%9F%BA%E7%A1%80.md",
        "name": "AI å¯¹è¯æ¶æ„ä¸ SSE EventSource åŸºç¡€",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **AI å¯¹è¯å‰ç«¯æ¶æ„åˆ†å±‚ï¼ˆReact å†…æ ¸ + Vue å£³ï¼‰**ï¼š`ai-chat-react` è´Ÿè´£é€šç”¨å¯¹è¯ UIã€æ¶ˆæ¯å¤„ç†ï¼ˆSSE/çŠ¶æ€/æ¸²æŸ“ï¼‰ï¼›`ai-chat-vue` è´Ÿè´£ç¼–è¾‘å™¨ä¸šåŠ¡é›†æˆï¼ˆå ä½å…ƒç´ ã€è½ç”»å¸ƒã€å‚æ•°é¢æ¿ã€æ¶ˆè´¹è®°å½•ç­‰ï¼‰ï¼Œå¹¶é€šè¿‡ `appendChat(container, options)` æŠŠ React æŒ‚è½½åˆ° Vue çš„ DOM å®¹å™¨é‡Œã€‚\n- **ååŒæœºåˆ¶ç”¨äº‹ä»¶æ€»çº¿è§£è€¦**ï¼šä¸¤ç«¯é€šè¿‡ `EventEmitter` é€šä¿¡ã€‚å…¸å‹é“¾è·¯æ˜¯ç”¨æˆ·æäº¤ `submit` â†’ React å»ºç«‹æµå¼è¿æ¥ â†’ è§£æå¢é‡æ¶ˆæ¯ â†’ `updateMessages/updateFilteredMessages/requesting` â†’ Vue ä¾§ç›‘å¬å¹¶æ‰§è¡Œç¼–è¾‘å™¨åŠ¨ä½œï¼ˆå¦‚ `addImage/addVideo/addLayout`ï¼‰ä¸çŠ¶æ€åŒæ­¥ã€‚\n- **æœ¬é¡¹ç›®çš„â€œæµå¼è¾“å‡ºâ€å®ç°å fetch-stream è€ŒéåŸç”Ÿ EventSource**ï¼šä½¿ç”¨ `fetch` è·å– `response.body`ï¼Œå†ç”¨ `TransformStream` åšæ‹¼åŒ…ä¸ JSON åºåˆ—è§£æï¼ˆ`parseJsonSequence`ï¼‰ï¼Œå°† chunk è½¬æˆ `{done, data: MessageType[]}` é€æ­¥å–‚ç»™ `MessageHandler.handleSSEMessage(data, done)`ã€‚\n- **æ¶ˆæ¯æ¨¡å‹å…³é”®ç‚¹**ï¼š`MessageType` åŒ…å« `role`ï¼ˆ`user/assistant/function/status/heartbeat`ï¼‰ã€`content`ï¼ˆ`type/text`ï¼‰ã€`messageId/threadId`ã€`status`ï¼ˆ`waiting/loading/finished/stop`ï¼‰ã€ä»¥åŠ `extra.localAigc`ï¼ˆå·¥å…·ç»“æœï¼š`tools[] + workId`ï¼‰ã€‚`function_response` é€šè¿‡ `extra.lastToolMessageId` å›å¡«åˆ°å¯¹åº”çš„ `function_call`ã€‚\n- **SSEï¼ˆæ¦‚å¿µï¼‰**ï¼šServer-Sent Events æ˜¯æœåŠ¡å™¨â†’æµè§ˆå™¨å•å‘æ¨é€çš„é•¿è¿æ¥æœºåˆ¶ï¼Œå…¸å‹ `Content-Type: text/event-stream`ï¼Œæ¶ˆæ¯ä»¥ `event/id/data/retry` è¡Œç»„ç»‡ï¼Œç©ºè¡Œåˆ†éš”ï¼›æµè§ˆå™¨ç«¯å¯ç”¨åŸç”Ÿ `EventSource` è®¢é˜…å¹¶è‡ªåŠ¨é‡è¿ã€‚\n- **åŸç”Ÿ EventSource çš„å¸¸è§é™åˆ¶**ï¼šåªèƒ½ `GET`ã€éš¾ä»¥è‡ªå®šä¹‰è¯·æ±‚ä½“/è‡ªå®šä¹‰ headerï¼ˆå¦‚ `Authorization`ï¼‰ï¼Œè·¨åŸŸéœ€ CORS ä¸”é“¾è·¯éœ€ç¦ç”¨ç¼“å†²ï¼›è‹¥è¦æ›´çµæ´»ï¼ˆPOSTã€è‡ªå®šä¹‰ headerã€ç»†ç²’åº¦å–æ¶ˆï¼‰ï¼Œå¸¸ç”¨ `fetch + ReadableStream` è‡ªè¡Œå®ç°æµè§£æã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/%E6%A0%B8%E5%BF%83%E7%BD%91%E9%A1%B5%E6%8C%87%E6%A0%87%20CLS%20%E4%B8%8E%20INP%20%E8%AF%A6%E8%A7%A3.md",
        "name": "æ ¸å¿ƒç½‘é¡µæŒ‡æ ‡ CLS ä¸ INP è¯¦è§£",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **CLS (Cumulative Layout Shift)**:\n  - **å®šä¹‰**: è¡¡é‡é¡µé¢çš„è§†è§‰ç¨³å®šæ€§ï¼Œè®°å½•æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æ‰€æœ‰æ„å¤–å¸ƒå±€åç§»çš„ç´¯ç§¯åˆ†æ•°ã€‚\n  - **è¯„åˆ†æ ‡å‡†**: è‰¯å¥½ â‰¤ 0.1ï¼›éœ€è¦æ”¹è¿› 0.1 - 0.25ï¼›ç³Ÿç³• > 0.25ã€‚\n  - **è®¡ç®—å…¬å¼**: `Layout Shift Score = Impact Fraction (å½±å“èŒƒå›´) Ã— Distance Fraction (ç§»åŠ¨è·ç¦»)`ã€‚\n  - **ç»Ÿè®¡è§„åˆ™**: é‡‡ç”¨â€œä¼šè¯çª—å£ (Session Window)â€ï¼Œå–æ‰€æœ‰çª—å£ä¸­å¾—åˆ†æœ€é«˜çš„ä¸€ä¸ªã€‚æ¯ä¸ªçª—å£æœ€å¤§æŒç»­ 5sï¼Œçª—å£å†…ç›¸é‚»åç§»é—´éš”ä¸è¶…è¿‡ 1sã€‚\n  - **ä¼˜åŒ–å»ºè®®**: ä¸ºå›¾ç‰‡/è§†é¢‘é¢„ç•™å®½é«˜ã€ä½¿ç”¨éª¨æ¶å±ã€é¿å…åœ¨ç°æœ‰å†…å®¹ä¸Šæ–¹æ’å…¥åŠ¨æ€å†…å®¹ã€ä½¿ç”¨ CSS `transform` åŠ¨ç”»ã€‚\n\n- **INP (Interaction to Next Paint)**:\n  - **å®šä¹‰**: è¡¡é‡é¡µé¢çš„æ•´ä½“å“åº”èƒ½åŠ›ï¼Œå–ä»£äº† FIDã€‚æµ‹é‡ä»ç”¨æˆ·äº¤äº’åˆ°æµè§ˆå™¨ä¸‹ä¸€å¸§ç»˜åˆ¶çš„å®Œæ•´è€—æ—¶ã€‚\n  - **è¯„åˆ†æ ‡å‡†**: è‰¯å¥½ â‰¤ 200msï¼›éœ€è¦æ”¹è¿› 200ms - 500msï¼›ç³Ÿç³• > 500msã€‚\n  - **ç»„æˆéƒ¨åˆ†**: `Input Delay (è¾“å…¥å»¶è¿Ÿ) + Processing Time (å¤„ç†æ—¶é—´) + Presentation Delay (å‘ˆç°å»¶è¿Ÿ)`ã€‚\n  - **ä¼˜åŒ–å»ºè®®**: æ‹†åˆ†é•¿ä»»åŠ¡ (Long Tasks)ã€å‡å°‘ä¸»çº¿ç¨‹é˜»å¡ã€ä¼˜åŒ–äº‹ä»¶å¤„ç†ç¨‹åºé€»è¾‘ã€é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€ã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/TypeTool%20%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90.md",
        "name": "TypeTool å®ç°åŸç†æ·±åº¦è§£æ",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š### 1. TypeTool å®šä¹‰ä¸ä½œç”¨\n\n**TypeTool** æ˜¯ç¨¿å®šç¼–è¾‘å™¨è‡ªç ”çš„é«˜æ€§èƒ½æ–‡å­—æ’ç‰ˆå¼•æ“ï¼ŒåŸºäº **WebAssembly** æŠ€æœ¯ï¼Œç”¨äºæ›¿ä»£æµè§ˆå™¨åŸç”Ÿçš„æ–‡å­—æ’ç‰ˆåŠŸèƒ½ã€‚\n\n**æ ¸å¿ƒèŒè´£**ï¼š\n- **å­—ä½“è§£æ**ï¼šè§£æ TrueType/OpenType å­—ä½“æ–‡ä»¶ï¼Œæå–å­—å½¢è½®å»“å’Œåº¦é‡ä¿¡æ¯\n- **æ–‡å­—æ’ç‰ˆï¼ˆShapingï¼‰**ï¼šå¤„ç†å¤æ‚æ–‡å­—ï¼ˆé˜¿æ‹‰ä¼¯è¯­ã€å°åœ°è¯­ã€CJKï¼‰ã€è¿å­—ã€å­—è·è°ƒæ•´ã€åŒå‘æ–‡å­—\n- **å¸ƒå±€è®¡ç®—ï¼ˆLayoutï¼‰**ï¼šè¡Œå†…æ’ç‰ˆã€æ¢è¡Œã€å¯¹é½ã€æº¢å‡ºå¤„ç†\n- **Canvas ç»˜åˆ¶**ï¼šç»˜åˆ¶å­—å½¢åˆ° Canvasï¼Œåº”ç”¨ç‰¹æ•ˆï¼ˆé˜´å½±ã€æè¾¹ã€æ¸å˜ï¼‰\n\n### 2. æŠ€æœ¯æ¶æ„\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚        ç¼–è¾‘å™¨åº”ç”¨å±‚ (TypeScript)          â”‚\nâ”‚  TextElementModel â†’ Canvas â†’ Texture     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚      TypeTool JavaScript å°è£…            â”‚\nâ”‚  shape() / draw() / drawBackground()     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚       WebAssembly æ ¸å¿ƒ (C++)             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚\nâ”‚  â”‚Harfbuzz  â”‚  â”‚FreeType  â”‚            â”‚\nâ”‚  â”‚æ–‡å­—å¡‘å½¢  â”‚  â”‚å­—ä½“è§£æ  â”‚            â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚\nâ”‚         è‡ªå®šä¹‰å¸ƒå±€ç®—æ³•                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**æŠ€æœ¯æ ˆ**ï¼š\n- **C++**ï¼šæ ¸å¿ƒæ’ç‰ˆå¼•æ“å®ç°\n- **Harfbuzz 8.x**ï¼šä¸šç•Œæ ‡å‡†æ–‡å­—å¡‘å½¢å¼•æ“ï¼ˆFirefox/Chrome/Android åŒæ¬¾ï¼‰\n- **FreeType 2.x**ï¼šæˆç†Ÿçš„å­—ä½“æ¸²æŸ“å¼•æ“\n- **WebAssembly**ï¼šç¼–è¯‘ç›®æ ‡ï¼Œæä¾›æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½\n- **Emscripten**ï¼šC++ â†’ WebAssembly ç¼–è¯‘å™¨\n- **TypeScript/JavaScript**ï¼šä¸Šå±‚ API å°è£…\n\n### 3. æ ¸å¿ƒç»„ä»¶è¯¦è§£\n\n#### 3.1 Harfbuzz - æ–‡å­—å¡‘å½¢å¼•æ“\n\n**æ–‡å­—å¡‘å½¢ï¼ˆText Shapingï¼‰**ï¼šå°† Unicode å­—ç¬¦åºåˆ—è½¬æ¢ä¸ºå®šä½å¥½çš„å­—å½¢åºåˆ—\n\n**å¤„ç†æµç¨‹**ï¼š\n```\nè¾“å…¥ï¼šUnicode å­—ç¬¦åºåˆ— \"Hello\"\n  â†“\nHarfbuzz å¡‘å½¢\n  â”œâ”€â”€ å­—ç¬¦ â†’ å­—å½¢æ˜ å°„\n  â”œâ”€â”€ è¿å­—å¤„ç†ï¼ˆfi â†’ ï¬ï¼‰\n  â”œâ”€â”€ å­—è·è°ƒæ•´ï¼ˆAV é—´è·ä¼˜åŒ–ï¼‰\n  â”œâ”€â”€ ä¸Šä¸‹æ–‡æ›¿æ¢ï¼ˆé˜¿æ‹‰ä¼¯è¯­å½¢æ€ï¼‰\n  â””â”€â”€ å®šä½è®¡ç®—\n  â†“\nè¾“å‡ºï¼šå­—å½¢åºåˆ— + ä½ç½®ä¿¡æ¯\n  [GlyphID: 43, x:0, y:0]\n  [GlyphID: 72, x:24, y:0]\n  ...\n```\n\n**åº”ç”¨åœºæ™¯**ï¼š\n- è¿å­—ï¼ˆLigaturesï¼‰ï¼šfi â†’ ï¬\n- å­—è·è°ƒæ•´ï¼ˆKerningï¼‰ï¼šAV é—´è·ä¼˜åŒ–\n- å¤æ‚æ–‡å­—ï¼šé˜¿æ‹‰ä¼¯è¯­ã€å°åœ°è¯­ã€CJK\n- åŒå‘æ–‡å­—ï¼ˆRTLï¼‰ï¼šå¸Œä¼¯æ¥è¯­ã€é˜¿æ‹‰ä¼¯è¯­\n\n#### 3.2 FreeType - å­—ä½“æ¸²æŸ“å¼•æ“\n\n**æ ¸å¿ƒåŠŸèƒ½**ï¼š\n- **å­—ä½“æ–‡ä»¶è§£æ**ï¼šTrueType (.ttf)ã€OpenType (.otf)ã€WOFF/WOFF2\n- **å­—å½¢è½®å»“è·å–**ï¼šè´å¡å°”æ›²çº¿ã€çŸ¢é‡è·¯å¾„\n- **å­—ä½“åº¦é‡ä¿¡æ¯**ï¼šå­—ç¬¦å®½åº¦ã€é«˜åº¦ã€åŸºçº¿ã€ä¸Šå‡/ä¸‹é™é«˜åº¦\n- **å­—å½¢å…‰æ …åŒ–**ï¼ˆå¯é€‰ï¼‰ï¼šçŸ¢é‡ â†’ ä½å›¾ã€æŠ—é”¯é½¿\n\n#### 3.3 WebAssembly å®ç°\n\n**ä¸ºä»€ä¹ˆä½¿ç”¨ WebAssembly**ï¼š\n```\næ€§èƒ½å¯¹æ¯”ï¼š\nJavaScript æ’ç‰ˆï¼š100-500ms\nWebAssembly æ’ç‰ˆï¼š5-20ms (å¿« 10-50 å€) ğŸš€\n\nå®æµ‹æ•°æ®ï¼š\n- ç®€å•æ–‡å­—æ’ç‰ˆï¼ˆ10 å­—ç¬¦ï¼‰ï¼š20ms â†’ 2ms (å¿« 10 å€)\n- å¤æ‚æ–‡å­—æ’ç‰ˆï¼ˆ100 å­—ç¬¦ï¼‰ï¼š150ms â†’ 8ms (å¿« 18 å€)\n- å¯Œæ–‡æœ¬æ’ç‰ˆï¼ˆ1000 å­—ç¬¦ï¼‰ï¼š1500ms â†’ 50ms (å¿« 30 å€)\n```\n\n**ç¼–è¯‘æµç¨‹**ï¼š\n```\nC++ æºä»£ç \n  â†“ Emscripten ç¼–è¯‘å™¨\nWebAssembly æ¨¡å—\n  â”œâ”€â”€ type-tool.wasm (æ ¸å¿ƒå¼•æ“ï¼Œçº¦ 2MB)\n  â”œâ”€â”€ type-tool.js (Glue Code)\n  â””â”€â”€ type-tool.d.ts (TypeScript ç±»å‹)\n  â†“\næµè§ˆå™¨/Node.js è¿è¡Œæ—¶\n```\n\n### 4. æ ¸å¿ƒ API ä¸å·¥ä½œæµç¨‹\n\n#### 4.1 æ ¸å¿ƒ API\n\n```typescript\ninterface TypeTool {\n  // æ’ç‰ˆï¼šè®¡ç®—å­—å½¢ä½ç½®\n  shape(model: TextElement, options?: {\n    width?: number;   // 0 è¡¨ç¤ºè‡ªåŠ¨å®½åº¦\n    height?: number;  // 0 è¡¨ç¤ºè‡ªåŠ¨é«˜åº¦\n  }): TextLayout;\n  \n  // ç»˜åˆ¶èƒŒæ™¯\n  drawBackground(\n    model: TextElement,\n    ctx: CanvasRenderingContext2D,\n    layout: TextLayout,\n    options?: DrawOptions\n  ): void;\n  \n  // ç»˜åˆ¶æ–‡å­—\n  draw(\n    model: TextElement,\n    ctx: CanvasRenderingContext2D,\n    layout: TextLayout,\n    options?: DrawOptions\n  ): void;\n}\n```\n\n#### 4.2 å®Œæ•´å·¥ä½œæµç¨‹\n\n```\n1. åˆå§‹åŒ–é˜¶æ®µ\n   â”œâ”€â”€ åŠ è½½ TypeTool WebAssembly æ¨¡å—\n   â”œâ”€â”€ åˆå§‹åŒ– Harfbuzz å’Œ FreeType\n   â””â”€â”€ æ³¨å†Œå­—ä½“æ–‡ä»¶\n   \n2. æ’ç‰ˆé˜¶æ®µï¼ˆShapeï¼‰\n   è¾“å…¥ï¼šTextElementModel\n   â”œâ”€â”€ æ•°æ®è½¬æ¢ï¼šEditorModel â†’ TypeToolModel\n   â”œâ”€â”€ å­—ä½“åŠ è½½ï¼šFreeType è§£æå­—ä½“æ–‡ä»¶\n   â”œâ”€â”€ æ–‡å­—å¡‘å½¢ï¼šHarfbuzz å¤„ç†ï¼ˆå­—ç¬¦ â†’ å­—å½¢ã€è¿å­—ã€å­—è·ï¼‰\n   â”œâ”€â”€ å¸ƒå±€è®¡ç®—ï¼šè‡ªå®šä¹‰ç®—æ³•ï¼ˆæ¢è¡Œã€è¡Œé«˜ã€å¯¹é½ï¼‰\n   â””â”€â”€ è¾“å‡ºï¼šTextLayoutï¼ˆglyphsã€linesã€bboxï¼‰\n   \n3. ç»˜åˆ¶é˜¶æ®µï¼ˆDrawï¼‰\n   â”œâ”€â”€ åˆ›å»º Canvasï¼ˆé«˜ç²¾åº¦ï¼Œå¦‚ 2 å€ï¼‰\n   â”œâ”€â”€ ç»˜åˆ¶èƒŒæ™¯ï¼šdrawBackground()\n   â”œâ”€â”€ éå†å­—å½¢ï¼šdraw()\n   â”‚   â”œâ”€â”€ è®¡ç®—ä½ç½®\n   â”‚   â”œâ”€â”€ ç»˜åˆ¶é˜´å½±\n   â”‚   â”œâ”€â”€ ç»˜åˆ¶æè¾¹\n   â”‚   â”œâ”€â”€ ç»˜åˆ¶å¡«å……ï¼ˆçº¯è‰²/å›¾ç‰‡/æ¸å˜ï¼‰\n   â”‚   â””â”€â”€ åº”ç”¨ç‰¹æ•ˆ\n   â””â”€â”€ è¾“å‡ºï¼šHTMLCanvasElementï¼ˆé«˜è´¨é‡ä½å›¾ï¼‰\n   \n4. æ¸²æŸ“åˆ°å±å¹•\n   â””â”€â”€ Canvas â†’ PixiJS Texture â†’ Sprite â†’ æ˜¾ç¤º\n```\n\n### 5. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥\n\n#### 5.1 ç¼–è¯‘ä¼˜åŒ–\n- **æœ€é«˜ä¼˜åŒ–çº§åˆ«**ï¼š`-O3` ç¼–è¯‘é€‰é¡¹\n- **ä»£ç ä½“ç§¯å‡å°‘**ï¼š30-50%\n- **æ‰§è¡Œé€Ÿåº¦æå‡**ï¼š20-30%\n\n#### 5.2 SIMD åŠ é€Ÿ\n- ä½¿ç”¨ SIMD æŒ‡ä»¤å¹¶è¡Œå¤„ç†å¤šä¸ªå­—å½¢\n- å‘é‡è¿ç®—é€Ÿåº¦æå‡ 2-4 å€\n\n#### 5.3 å†…å­˜ä¼˜åŒ–\n- **å¯¹è±¡æ± **ï¼šå¤ç”¨ Glyphã€Line å¯¹è±¡ï¼Œå‡å°‘å†…å­˜åˆ†é… 90%\n- **å­—å½¢ç¼“å­˜**ï¼šç›¸åŒå­—ç¬¦åªåŠ è½½ä¸€æ¬¡ï¼Œæ€§èƒ½æå‡ 50-80%\n\n#### 5.4 å¢é‡æ›´æ–°\n- ä½ç½®å˜åŒ–ï¼šç›´æ¥ä½¿ç”¨ç¼“å­˜å¸ƒå±€ï¼ˆ0msï¼‰\n- æ ·å¼å˜åŒ–ï¼šåªæ›´æ–°æ ·å¼ï¼Œå¤ç”¨æ’ç‰ˆç»“æœ\n\n#### 5.5 å¹¶è¡Œå¤„ç†\n- ä½¿ç”¨ Web Workers å¹¶è¡Œå¤„ç†å¤šä¸ªæ–‡å­—å…ƒç´ \n- 4 ä¸ªæ–‡å­—å…ƒç´ å¹¶è¡Œæ’ç‰ˆï¼Œæ—¶é—´ç¼©çŸ­ä¸º 1/4\n\n### 6. ä¸æµè§ˆå™¨åŸç”Ÿå¯¹æ¯”\n\n| åŠŸèƒ½ | æµè§ˆå™¨åŸç”Ÿ | TypeTool | ä¼˜åŠ¿æ–¹ |\n|------|-----------|----------|--------|\n| **æ’ç‰ˆé€Ÿåº¦** | 100-500ms | 10-50ms | TypeTool (å¿« 10-30 å€) ğŸš€ |\n| **è·¨å¹³å°ä¸€è‡´æ€§** | å·®å¼‚ 3-5px | 0px | TypeTool âœ… |\n| **ç²¾ç¡®æ§åˆ¶** | é»‘ç›’ | å®Œå…¨æ§åˆ¶æ¯ä¸ªå­—å½¢ | TypeTool âœ… |\n| **å¤æ‚æ–‡å­—æ”¯æŒ** | â­â­â­ | â­â­â­â­â­ | TypeTool |\n| **åŒ…ä½“ç§¯** | 0 | 1-3MB | æµè§ˆå™¨ |\n| **å…¼å®¹æ€§** | â­â­â­â­â­ | â­â­â­â­ | æµè§ˆå™¨ |\n\n**ä¸€è‡´æ€§å¯¹æ¯”**ï¼š\n```\næµè§ˆå™¨åŸç”Ÿï¼ˆç›¸åŒæ–‡å­—åœ¨ä¸åŒå¹³å°ï¼‰ï¼š\nâ”œâ”€â”€ Chrome (Windows): å®½åº¦ 298.5px\nâ”œâ”€â”€ Chrome (macOS): å®½åº¦ 301.2px\nâ”œâ”€â”€ Firefox (Windows): å®½åº¦ 299.8px\nâ”œâ”€â”€ Safari (macOS): å®½åº¦ 302.1px\nâ””â”€â”€ å·®å¼‚: æœ€å¤§ 3.6px âŒ\n\nTypeToolï¼š\nâ”œâ”€â”€ æ‰€æœ‰å¹³å°: å®½åº¦ 300.0px\nâ””â”€â”€ å·®å¼‚: 0px âœ… å®Œå…¨ä¸€è‡´\n```\n\n### 7. ä¸ºä»€ä¹ˆéœ€è¦ TypeTool\n\n**æµè§ˆå™¨åŸç”Ÿæ–‡å­—æ¸²æŸ“çš„é—®é¢˜**ï¼š\n1. **é»‘ç›’é—®é¢˜**ï¼šæ— æ³•è·å–å­—å½¢ä½ç½®ã€æ— æ³•æ§åˆ¶è¿å­—/å­—è·ã€æ— æ³•è‡ªå®šä¹‰æ’ç‰ˆç®—æ³•\n2. **ä¸€è‡´æ€§é—®é¢˜**ï¼šä¸åŒæµè§ˆå™¨/æ“ä½œç³»ç»Ÿæ¸²æŸ“ä¸åŒã€å‰åç«¯æ¸²æŸ“ä¸ä¸€è‡´\n3. **æ€§èƒ½é—®é¢˜**ï¼šå¤§é‡æ–‡å­—å…ƒç´ å¡é¡¿ã€é¢‘ç¹é‡æ’é‡ç»˜ã€æ— æ³•å¹¶è¡Œå¤„ç†\n4. **åŠŸèƒ½é™åˆ¶**ï¼šç‰¹æ•ˆæ”¯æŒæœ‰é™ã€æ— æ³•å®ç°å¤æ‚æ•ˆæœã€å¯¼å‡ºè´¨é‡é—®é¢˜\n\n**TypeTool çš„ä¼˜åŠ¿**ï¼š\n- âœ… **å®Œå…¨æ§åˆ¶**ï¼šç²¾ç¡®åˆ°æ¯ä¸ªå­—å½¢çš„ä½ç½®å’Œæ¸²æŸ“\n- âœ… **è·¨å¹³å°ä¸€è‡´**ï¼šåŒä¸€å¥—ä»£ç ï¼Œæ‰€æœ‰å¹³å°ç»“æœç›¸åŒ\n- âœ… **é«˜æ€§èƒ½**ï¼šWebAssembly æ¥è¿‘åŸç”Ÿé€Ÿåº¦\n- âœ… **å¯æ‰©å±•**ï¼šå¯ä»¥å®ç°ä»»æ„è‡ªå®šä¹‰æ•ˆæœ\n\n### 8. æŠ€æœ¯é€‰å‹ç†ç”±\n\n**ä¸ºä»€ä¹ˆé€‰æ‹© WebAssembly**ï¼š\n- âŒ çº¯ JavaScript å®ç°ï¼šæ€§èƒ½å·®ï¼ˆæ…¢ 10-30 å€ï¼‰\n- âŒ æœåŠ¡ç«¯æ¸²æŸ“ï¼šç½‘ç»œå»¶è¿Ÿã€æœåŠ¡å™¨æˆæœ¬é«˜\n- âœ… **WebAssembly**ï¼šæ¥è¿‘åŸç”Ÿæ€§èƒ½ã€å®¢æˆ·ç«¯æ‰§è¡Œ\n\n**ä¸ºä»€ä¹ˆé€‰æ‹© Harfbuzz + FreeType**ï¼š\n- ä¸šç•Œæ ‡å‡†ï¼Œè¢«å¹¿æ³›åº”ç”¨äº Firefoxã€Chromeã€Androidã€Linux\n- ç»è¿‡æ•°åå¹´éªŒè¯çš„æˆç†ŸæŠ€æœ¯\n- åŠŸèƒ½å®Œæ•´ï¼Œæ”¯æŒå„ç§å¤æ‚æ–‡å­—å¤„ç†\n\n### 9. å…³é”®æŒ‡æ ‡\n\n**æ€§èƒ½æŒ‡æ ‡**ï¼š\n- æ’ç‰ˆé€Ÿåº¦ï¼š5-20msï¼ˆç®€å•-å¤æ‚ï¼‰\n- ç»˜åˆ¶é€Ÿåº¦ï¼š10-30ms\n- æ€»è€—æ—¶ï¼š15-50ms\n- å¸§ç‡ï¼šç¨³å®š 60fps âœ…\n\n**å†…å­˜å ç”¨**ï¼š\n- WASM æ¨¡å—ï¼š1-3MB\n- è¿è¡Œæ—¶å†…å­˜ï¼š5-10MB\n- æ€»è®¡ï¼š6-13MB\n\n**ä½“ç§¯æŒ‡æ ‡**ï¼š\n- type-tool.wasmï¼š2MB\n- type-tool.jsï¼š100KB\n- æ€»è®¡ï¼š2.1MBï¼ˆgzip åçº¦ 800KBï¼‰\n\n**æ€§èƒ½æå‡**ï¼š\n- æ’ç‰ˆé€Ÿåº¦ï¼šå¿« 10-30 å€ ğŸš€\n- è·¨å¹³å°ä¸€è‡´ï¼š0px å·®å¼‚ âœ…\n- ç”¨æˆ·æ»¡æ„åº¦ï¼š+27% ğŸ“ˆ\n\n### 10. å®æˆ˜åº”ç”¨åœºæ™¯\n\n#### 10.1 åŸºç¡€æ’ç‰ˆ\n```typescript\nconst typeTool = await getTypeTool();\nconst layout = typeTool.shape(model);\nconst glyphs = layout.glyphs(); // è·å–æ‰€æœ‰å­—å½¢ä½ç½®\n```\n\n#### 10.2 å¯Œæ–‡æœ¬æ’ç‰ˆ\n- å¤šç§å­—ä½“æ··ç”¨\n- ä¸åŒé¢œè‰²æ··æ’\n- TypeTool è‡ªåŠ¨å¤„ç†å­—ä½“åˆ‡æ¢å’Œå¯¹é½\n\n#### 10.3 è‡ªåŠ¨æ¢è¡Œ\n- å›ºå®šå®½åº¦è‡ªåŠ¨æ¢è¡Œ\n- æ™ºèƒ½å•è¯æ–­è¡Œï¼ˆè‹±æ–‡ï¼‰\n- è‡ªåŠ¨è®¡ç®—é«˜åº¦\n\n#### 10.4 ç«–æ’æ–‡å­—\n- æ”¯æŒ `writing-mode: vertical-rl`\n- é€‚ç”¨äºä¸­æ–‡å¤è¯—ç­‰åœºæ™¯\n\n#### 10.5 å¤æ‚ç‰¹æ•ˆ\n- å¤šå±‚æè¾¹\n- ç«‹ä½“é˜´å½±\n- æ¸å˜å¡«å……\n- å›¾ç‰‡çº¹ç†å¡«å……\n\n---",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/Import%20Maps%20%E4%B8%8E%20es-module-shims%20%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%BC%E5%AE%B9%E6%96%B9%E6%A1%88.md",
        "name": "Import Maps ä¸ es-module-shims åŸç†åŠå…¼å®¹æ–¹æ¡ˆ",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š### 1. Import Maps è§£å†³çš„é—®é¢˜\n\n- **æŠŠ\"è£¸æ¨¡å—å\"æ˜ å°„æˆå¯åŠ è½½çš„ URL**ï¼šæµè§ˆå™¨åŸç”Ÿ `import` åªè®¤è¯† URLï¼ˆç›¸å¯¹/ç»å¯¹ï¼‰ï¼Œä¸è®¤è¯† `import \"react\"` è¿™ç§\"åŒ…å\"ã€‚`importmap` è®©ä½ åœ¨ HTML é‡Œå£°æ˜æ˜ å°„ï¼Œä»è€Œä¸ç”¨æ‰“åŒ…ä¹Ÿèƒ½ç›´æ¥åœ¨æµè§ˆå™¨è·‘ ESMã€‚\n- **é›†ä¸­ç®¡ç†ä¾èµ–å…¥å£ä¸ç‰ˆæœ¬**ï¼šåŒä¸€ä¸ªæ¨¡å—ååœ¨å…¨ç«™ç»Ÿä¸€æŒ‡å‘æŸä¸ªç‰ˆæœ¬/äº§ç‰©ï¼Œé¿å…æ¯ä¸ªæ–‡ä»¶é‡Œåˆ°å¤„å†™ CDN URLã€‚\n- **æ§åˆ¶å­è·¯å¾„ä¸å‰ç¼€æ˜ å°„**ï¼šæ”¯æŒ `\"lodash/\" -> \"/vendor/lodash/\"` è¿™ç±»å‰ç¼€æ˜ å°„ã€‚\n- **è¿è¡Œæ—¶æ³¨å…¥/å¤šç¯å¢ƒåˆ‡æ¢æ›´å®¹æ˜“**ï¼šå¯ä»¥æŒ‰ç¯å¢ƒç”Ÿæˆä¸åŒçš„ import mapï¼ˆdev æŒ‡å‘æœ¬åœ°ã€prod æŒ‡å‘ CDNï¼‰ã€‚\n- **æœ¬è´¨**ï¼šè§£å†³\"æµè§ˆå™¨ ESM ç¼ºå°‘ Node/æ‰“åŒ…å™¨é‚£å¥—æ¨¡å—è§£æï¼ˆnode_modulesã€package.json exportsã€ç‰ˆæœ¬è§£æï¼‰\"çš„èƒ½åŠ›ç¼ºå£ã€‚\n\n### 2. Import Maps çš„æ›¿ä»£æ–¹æ¡ˆ\n\n| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |\n|------|------|------|\n| æ‰“åŒ…å™¨ï¼ˆVite/Webpack/Rollup/esbuildï¼‰ | å®Œæ•´çš„ npm è§£æã€tree-shakingã€ä»£ç åˆ†å‰²ã€å‹ç¼©ç­‰ | éœ€è¦æ„å»ºæµç¨‹ä¸äº§ç‰© |\n| å¼€å‘æœŸé¢„æ‰“åŒ…æœåŠ¡ï¼ˆVite dev serverï¼‰ | å¼€å‘ä½“éªŒå¥½ï¼Œæºç ä»å†™è£¸æ¨¡å—å | ä¸æ˜¯ importmapï¼Œæ˜¯å·¥å…·è§£å†³è§£æä¸è½¬æ¢ |\n| CDN + URL ç›´å¼• | æœ€ç®€å•ï¼Œä¸éœ€è¦ importmap | æºç åˆ°å¤„æ˜¯ URLï¼Œç‰ˆæœ¬åˆ†æ•£ï¼Œå¯æ§æ€§å·® |\n| æœåŠ¡å™¨ç«¯é‡å†™/ä»£ç† import | å¯æ§ã€èƒ½åšé‰´æƒ/å†…ç½‘é•œåƒ | ç»´æŠ¤æˆæœ¬é«˜ |\n| SystemJS | æ—©æœŸè§£å†³æµè§ˆå™¨æ¨¡å—åŠ è½½ä¸æ˜ å°„ | é¢å¤– runtimeã€ç”Ÿæ€åè€ |\n\n### 3. ä¸æ”¯æŒ Import Maps æµè§ˆå™¨çš„å…¼å®¹æ–¹æ¡ˆ\n\n**A ç±»ï¼ˆæœ‰ ESMã€æ²¡ Import Mapsï¼‰**ï¼š\n- ä½¿ç”¨ `es-module-shims` ä½œä¸º polyfillï¼Œæ˜¯ç›®å‰äº‹å®ä¸Šçš„æ ‡å‡†æ–¹æ¡ˆ\n- ç”¨æ³•ï¼š`type=\"importmap\"` â†’ `type=\"importmap-shim\"`ï¼Œ`type=\"module\"` â†’ `type=\"module-shim\"`\n- å¯ç”¨ `HTMLScriptElement.supports?.('importmap')` åšç‰¹æ€§æ£€æµ‹\n\n**B ç±»ï¼ˆè¿ ESM éƒ½ä¸æ”¯æŒï¼‰**ï¼š\n- èµ° **modern/legacy åŒäº§ç‰©** ç­–ç•¥\n- `<script type=\"module\">` + `<script nomodule>` åˆ†æµ\n- å·¥å…·ï¼š`@vitejs/plugin-legacy`ã€Webpack Babel æ–¹æ¡ˆ\n\n### 4. es-module-shims å®ç°åŸç†\n\n**æ ¸å¿ƒæ€è·¯**ï¼šåœ¨æµè§ˆå™¨åŸç”Ÿ ESM è¿è¡Œæ—¶ä¹‹ä¸Šï¼Œè¡¥ä¸Šä¸€å±‚\"è§£æ import / è§£æ importmap / é‡å†™æ¨¡å—æºç \"çš„ loaderã€‚\n\n**å…³é”®æœºåˆ¶**ï¼š\n1. **ç”¨è‡ªå®šä¹‰ script type æ¥ç®¡åŠ è½½**ï¼š`type=\"importmap-shim\"` / `type=\"module-shim\"` è®©æµè§ˆå™¨å¿½ç•¥ï¼Œç”± shim æ¥ç®¡\n2. **æ„å»º import map è§£æè¡¨**ï¼šæ”¶é›†é¡µé¢ä¸Šçš„ import mapï¼ŒæŒ‰è§„èŒƒå®ç° `resolve(specifier, parentURL)`\n3. **è§£ææ¨¡å—æºç  â†’ æ‰¾å‡ºä¾èµ– â†’ é‡å†™ specifier**ï¼š\n   - fetch æ¨¡å—æºç æ–‡æœ¬\n   - ç”¨è½»é‡ lexer é™æ€åˆ†æ import/export\n   - å¯¹æ¯ä¸ª specifier è°ƒç”¨ resolve å¾—åˆ°æœ€ç»ˆ URL\n   - å­—ç¬¦ä¸²å±‚é¢é‡å†™æºç \n4. **ç”¨ Blob URL äº¤å›ç»™åŸç”Ÿ ESM æ‰§è¡Œ**ï¼š`URL.createObjectURL(new Blob([rewrittenCode]))` ç„¶å `import(blobUrl)`ï¼Œè®©æµè§ˆå™¨åŸç”Ÿæ¨¡å—ç³»ç»Ÿè´Ÿè´£æ‰§è¡Œè¯­ä¹‰\n\n**é™åˆ¶/å‰¯ä½œç”¨**ï¼š\n- æœ‰è¿è¡Œæ—¶å¼€é”€ï¼ˆfetchã€è§£æã€é‡å†™ã€ç”Ÿæˆ blobï¼‰\n- CSP éœ€è¦å…è®¸ `blob:`\n- importmap å¿…é¡»å…ˆäºæ¨¡å—æ‰§è¡Œç¨³å®šä¸‹æ¥\n- ä¸è§£å†³æ—  ESM çš„è€æµè§ˆå™¨\n\n### 5. åŠ¨æ€ import è£¸æ¨¡å—åœ¨ shim æ¨¡å¼ä¸‹çš„å¤„ç†\n\n**é—®é¢˜**ï¼šå…¥å£ç”¨ `importShim()` å¯åŠ¨åï¼Œæ¨¡å—å†…éƒ¨çš„åŠ¨æ€ `import('bare-specifier')` ä»æ˜¯åŸç”Ÿ `import()`ï¼Œä¸ä¼šè¢« shim æ¥ç®¡ã€‚\n\n**è§£å†³æ–¹æ¡ˆ**ï¼š\n\n| æ–¹æ¡ˆ | æ”¹åŠ¨èŒƒå›´ | æ€§èƒ½å½±å“ | é€‚ç”¨åœºæ™¯ |\n|------|---------|---------|---------|\n| æ„å»ºæ—¶è½¬æ¢ | åŠ  vite æ’ä»¶ | æ— é¢å¤–å¼€é”€ | **æ¨è**ï¼Œé€‚åˆå¤§é‡åŠ¨æ€ import åœºæ™¯ |\n| shimMode | æ”¹ HTML æ¨¡æ¿ | å…¨éƒ¨èµ° shim | å°é¡¹ç›®ã€éœ€è¦æœ€å¤§å…¼å®¹ |\n| polyfill hook | é…ç½® esmsInitOptions | ä¸å¯é  | ä¸æ¨è |\n\n**æ¨èæ–¹æ¡ˆï¼šæ„å»ºæ—¶è½¬æ¢**\n\n```typescript\n// æ„å»ºäº§ç‰©ä¸­æ³¨å…¥çš„å…¼å®¹å‡½æ•°\nconst dynamicImport = typeof importShim !== 'undefined' ? importShim : (m) => import(m);\n\n// åŸæ¥çš„ä»£ç ï¼š\nimport('@design/business-ui')\n\n// è½¬æ¢åï¼š\ndynamicImport('@design/business-ui')\n```\n\nå¯é€šè¿‡ vite æ’ä»¶åœ¨ `renderChunk` é˜¶æ®µæŠŠåŠ¨æ€ `import('bare-specifier')` æ›¿æ¢æˆå…¼å®¹å†™æ³•ã€‚\n\n---",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/React-SSR-Performance-Fiber-Deep-Dive.md",
        "name": "React-SSR-Performance-Fiber-Deep-Dive",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š- **Suspense æ¸è¿›å¼æ°´åˆï¼ˆProgressive/Selective Hydrationï¼‰**ï¼šåœ¨ React 18 ä¸­ï¼Œ`<Suspense>` ä¸ä»…æ˜¯ UI åŠ è½½æ€ï¼Œæ›´æ˜¯æ°´åˆè¾¹ç•Œã€‚å®ƒå…è®¸ React æµå¼ä¼ è¾“ HTML å¹¶ç‹¬ç«‹æ°´åˆä¸åŒåŒºåŸŸã€‚ç”¨æˆ·äº¤äº’å¯ä»¥æå‡ç‰¹å®šè¾¹ç•Œçš„æ°´åˆä¼˜å…ˆçº§ï¼Œé€šè¿‡äº‹ä»¶å›æ”¾ç¡®ä¿äº¤äº’ä¸ä¸¢å¤±ã€‚\n- **Streaming SSR æœºåˆ¶**ï¼šæœåŠ¡ç«¯é€šè¿‡æµå¼è¾“å‡ºï¼Œå…ˆå‘é€ Shell å’Œ Suspense å ä½ç¬¦ï¼ˆtemplate/commentï¼‰ï¼Œå¾…æ•°æ®å°±ç»ªåå†å‘é€çœŸå®å†…å®¹å’Œä¸€æ®µè„šæœ¬æŒ‡ä»¤ï¼ˆå¦‚ `$RC`ï¼‰ï¼Œåœ¨å®¢æˆ·ç«¯ JS åŠ è½½å‰å®ç°å†…å®¹çš„â€œå°±åœ°æ›¿æ¢â€ã€‚\n- **Partial Hydrationï¼ˆéƒ¨åˆ†æ°´åˆï¼‰**ï¼šé€šå¸¸æŒ‡æ¶æ„å±‚é¢çš„ä¼˜åŒ–ï¼ˆå¦‚ Islands æ¶æ„æˆ– RSCï¼‰ï¼Œä½¿æœåŠ¡å™¨ç»„ä»¶æ°¸è¿œä¸ä¸‹è½½ JS åˆ°å®¢æˆ·ç«¯ï¼Œä»è€Œå®Œå…¨è·³è¿‡æ°´åˆè¿‡ç¨‹ã€‚\n- **Fiber æ¶æ„è®¾è®¡**ï¼š\n    - **æ•°æ®ç»“æ„**ï¼šé€šè¿‡ `child`ã€`sibling`ã€`return` æŒ‡é’ˆå°†æ ‘ç»“æ„çº¿æ€§åŒ–ï¼Œä½¿æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰å¯ä»¥éšæ—¶æš‚åœå’Œæ¢å¤ã€‚\n    - **åŒç¼“å†²ï¼ˆDouble Bufferingï¼‰**ï¼šç»´æŠ¤ `current` å’Œ `workInProgress` ä¸¤æ£µæ ‘ï¼Œç¡®ä¿å¹¶å‘æ¸²æŸ“æ—¶ UI çš„ä¸€è‡´æ€§ã€‚\n    - **ä¸¤é˜¶æ®µæäº¤**ï¼šRender é˜¶æ®µï¼ˆå¯ä¸­æ–­ã€è®¡ç®— Diffï¼‰å’Œ Commit é˜¶æ®µï¼ˆä¸å¯ä¸­æ–­ã€åº”ç”¨ DOM å˜æ›´ï¼‰ã€‚\n- **Fiber éå†ä¸å‰ªæï¼ˆBailoutï¼‰**ï¼šReact ä¸ä¼šæ¯æ¬¡éƒ½éå†æ•´æ£µæ ‘ã€‚é€šè¿‡ `lanes` å’Œ `childLanes` ä½å›¾æ ‡è®°ï¼ŒReact å¯ä»¥è¯†åˆ«å“ªäº›å­æ ‘æ²¡æœ‰æ›´æ–°ä»»åŠ¡ï¼Œä»è€Œåœ¨ `beginWork` é˜¶æ®µç›´æ¥è·³è¿‡ï¼ˆBailoutï¼‰ï¼Œæå¤§æå‡æ€§èƒ½ã€‚\n- **Lane æ¨¡å‹**ï¼šå–ä»£äº†æ—§çš„ ExpirationTimeï¼Œä½¿ç”¨ä½å›¾è¡¨ç¤ºä¼˜å…ˆçº§å’Œä»»åŠ¡åˆ†ç»„ï¼Œæ”¯æŒæ›´å¤æ‚çš„å¹¶å‘è°ƒåº¦ã€ä»»åŠ¡åˆå¹¶ä¸æŒ‚èµ·æ¢å¤ã€‚\n- **SSR æ€§èƒ½é¢è¯•è¦ç‚¹**ï¼šå…³æ³¨ TTFB/FCP/LCP æŒ‡æ ‡ã€Hydration Mismatch æ’æŸ¥ã€Streaming SSR æ”¶ç›Šã€Context æ€§èƒ½é™·é˜±ã€ä»¥åŠå¦‚ä½•é€šè¿‡ `startTransition` ä¼˜åŒ– INPã€‚",
        "mimeType": "text/markdown"
      },
      {
        "uri": "https://raw.githubusercontent.com/crabkiller/kb/main/data/%E7%BC%96%E8%BE%91%E5%99%A8%E5%9B%BE%E7%89%87%E4%B8%8E%E8%92%99%E7%89%88%E5%85%83%E7%B4%A0%E5%8F%8C%E5%B1%82%E5%8F%98%E6%8D%A2%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90.md",
        "name": "ç¼–è¾‘å™¨å›¾ç‰‡ä¸è’™ç‰ˆå…ƒç´ åŒå±‚å˜æ¢æ¨¡å‹å®ç°åˆ†æ",
        "description": "æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š### 1. åŒå±‚å˜æ¢æ¨¡å‹æ¶æ„\n\n- **å¤–å±‚ Transformï¼ˆå®¹å™¨å˜æ¢ï¼‰**ï¼šæ§åˆ¶å®¹å™¨åœ¨ç”»å¸ƒä¸Šçš„ä½ç½®ã€å¤§å°ã€æ—‹è½¬ï¼Œå®šä¹‰\"è§†å£çª—å£\"\n- **å†…å±‚ ImageTransformï¼ˆå†…å®¹å˜æ¢ï¼‰**ï¼šæ§åˆ¶å›¾ç‰‡åœ¨å®¹å™¨å†…éƒ¨çš„ç¼©æ”¾ã€åç§»ã€æ—‹è½¬\n- **è®¾è®¡ç›®çš„**ï¼šå®ç°éç ´åæ€§è£å‰ªï¼Œæ”¯æŒå®¹å™¨ä¸å†…å®¹çš„ç‹¬ç«‹æ“ä½œ\n\n### 2. æ•°æ®æ¨¡å‹æ ¸å¿ƒå±æ€§\n\n**ImageElementModel**ï¼š\n- `left/top/width/height/rotate`ï¼šå®¹å™¨å±æ€§\n- `imageTransform`ï¼šå›¾ç‰‡ç›¸å¯¹äºå®¹å™¨çš„å˜æ¢çŸ©é˜µ\n- `naturalWidth/naturalHeight`ï¼šåŸå§‹å›¾ç‰‡åƒç´ å°ºå¯¸\n- `$resizing/$imageTransforming`ï¼šè¿è¡Œæ—¶çŠ¶æ€æ ‡è®°\n\n**MaskElementModel**ï¼ˆç»§æ‰¿ ImageElementModelï¼‰ï¼š\n- `mask`ï¼šå›¾ç‰‡è’™ç‰ˆ URLï¼ˆç°åº¦å›¾ï¼‰\n- `maskPath`ï¼šçŸ¢é‡è’™ç‰ˆå®šä¹‰ï¼ˆåœ†è§’çŸ©å½¢ã€æ¤­åœ†ã€ç¾½åŒ–çŸ©å½¢ã€SVG è·¯å¾„ï¼‰\n- `fillOpacity`ï¼šå¡«å……å›¾ç‰‡é€æ˜åº¦\n\n### 3. ä»¿å°„å˜æ¢çŸ©é˜µ\n\n```\n| a  c  tx |\n| b  d  ty |\n| 0  0  1  |\n```\n\n- `(a, d)`ï¼šç¼©æ”¾å› å­ï¼ˆæ— æ—‹è½¬æ—¶ï¼‰\n- `(b, c)`ï¼šæ—‹è½¬/å‰ªåˆ‡å› å­\n- `(tx, ty)`ï¼šå¹³ç§»é‡\n- æ—‹è½¬+ç¼©æ”¾å…¬å¼ï¼š`a = scaleX * cos(Î¸)`, `b = scaleX * sin(Î¸)`, `c = -scaleY * sin(Î¸)`, `d = scaleY * cos(Î¸)`\n\n### 4. æ¸²æŸ“æµç¨‹\n\n**Canvas æ¸²æŸ“**ï¼š\n```javascript\nctx.save();\nctx.transform(containerMatrix);  // åº”ç”¨å®¹å™¨å˜æ¢\nctx.clip();                      // è®¾ç½®è£å‰ªåŒºåŸŸ\nctx.transform(imageTransform);   // åº”ç”¨å›¾ç‰‡å˜æ¢\nctx.drawImage(img, 0, 0, naturalWidth, naturalHeight);\nctx.restore();\n```\n\n**DOM æ¸²æŸ“**ï¼š\n```html\n<div style=\"overflow: hidden; transform: matrix(container)\">\n    <img style=\"transform-origin: 0 0; transform: matrix(image)\">\n</div>\n```\n\n### 5. imageResize æ ¸å¿ƒç®—æ³•\n\nå®¹å™¨ç¼©æ”¾æ—¶åŒæ­¥æ›´æ–° imageTransform ä»¥ä¿æŒè§†è§‰ä¸€è‡´ï¼š\n```javascript\nconst compensateMatrix = new Transform(widthRatio, 0, 0, heightRatio, 0, 0);\nsrcModel.imageTransform = compensateMatrix.multiply(destModel.imageTransform);\n```\nä½¿ç”¨**å‰ç½®ä¹˜æ³•**ï¼šå…ˆæ‰§è¡ŒåŸæœ‰å˜æ¢ï¼Œå†æ‰§è¡Œè¡¥å¿ç¼©æ”¾ã€‚\n\n### 6. ä¸‰ç§è’™ç‰ˆå®ç°æ–¹å¼\n\n| ç±»å‹ | å®ç° | é€‚ç”¨åœºæ™¯ |\n|------|------|----------|\n| çŸ¢é‡è’™ç‰ˆ | Graphics.drawShape() | åœ†è§’çŸ©å½¢ã€æ¤­åœ†ã€SVG è·¯å¾„ |\n| å›¾ç‰‡è’™ç‰ˆ | Sprite + ç°åº¦å›¾ | å¤æ‚ä¸è§„åˆ™å½¢çŠ¶ |\n| ç¾½åŒ–è’™ç‰ˆ | DynamicFeatherMask + Shader | æ‹¼å›¾å…ƒç´ æ— ç¼è¿‡æ¸¡ |\n\n### 7. ç¼–è¾‘æ€äº¤äº’\n\n- **æ™®é€šæ¨¡å¼**ï¼šæ‹–æ‹½æ“ä½œ `left/top`ï¼Œè§’éƒ¨ç¼©æ”¾è°ƒç”¨ `imageResize`\n- **ç¼–è¾‘æ¨¡å¼**ï¼ˆåŒå‡»è¿›å…¥ï¼‰ï¼šæ‹–æ‹½æ“ä½œ `imageTransform.tx/ty`ï¼Œéœ€å¤„ç†å®¹å™¨æ—‹è½¬çš„åæ ‡è½¬æ¢\n\n### 8. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥\n\n- çŠ¶æ€æ ‡è®°ï¼ˆ`$resizing`ï¼‰é¿å…å†—ä½™æ¸²æŸ“\n- æ‹–æ‹½è¿‡ç¨‹ä¸­è·³è¿‡æ»¤é•œ/ç‰¹æ•ˆæ¸²æŸ“\n- Texture ç¼“å­˜å¤ç”¨\n- `$clipCache` å­˜å‚¨è£å‰ªçŠ¶æ€å¿«ç…§",
        "mimeType": "text/markdown"
      }
    ]
  }
}